import{a as oe,b as ae,c as se,d as le}from"./chunk-ZVT5Y6BU.js";import{a as E,c as me}from"./chunk-QMCR7WCT.js";import{a as ee,b as te,c as re}from"./chunk-INDHBAAU.js";import{a as ie,b as ne}from"./chunk-WFY6EWXF.js";import"./chunk-PIEP4UTV.js";import{c as y,d as S,f as I}from"./chunk-NQKSDALU.js";import"./chunk-FGMLFNZ2.js";import{b as F}from"./chunk-C4WKST7H.js";import{a as K,b as Y,d as Q,g as X}from"./chunk-56UCSB4U.js";import{b as k,d as m,f as O,g as R,j as T,k as N,l as q,m as L,n as A,p as B}from"./chunk-XCLEEEGU.js";import{a as G,b as D,c as z,d as V,f as U,g as j}from"./chunk-2JQEKP5E.js";import"./chunk-26UILUH3.js";import{$ as f,$a as x,Bb as g,Ca as a,Db as n,Eb as C,Fb as M,Na as b,Ra as p,cb as l,db as i,eb as t,fb as c,oa as v,ob as _,pb as h,pc as P,pd as H,rd as W,sd as J,td as Z,uc as w,ud as $}from"./chunk-MML5RVMT.js";function pe(e,s){e&1&&(i(0,"mat-error"),n(1," First name is required "),t())}function ce(e,s){e&1&&(i(0,"mat-error"),n(1," Last name is required "),t())}function ue(e,s){e&1&&(i(0,"span"),n(1,"Username is required"),t())}function ge(e,s){e&1&&(i(0,"span"),n(1,"Username must be at least 3 characters"),t())}function fe(e,s){e&1&&(i(0,"span"),n(1,"Username can only contain letters, numbers, and underscores"),t())}function _e(e,s){if(e&1&&(i(0,"mat-error"),p(1,ue,2,0,"span",6)(2,ge,2,0,"span",6)(3,fe,2,0,"span",6),t()),e&2){let o,r,d,u=h();a(),l("ngIf",(o=u.registerForm.get("username"))==null||o.errors==null?null:o.errors.required),a(),l("ngIf",(r=u.registerForm.get("username"))==null||r.errors==null?null:r.errors.minlength),a(),l("ngIf",(d=u.registerForm.get("username"))==null||d.errors==null?null:d.errors.pattern)}}function he(e,s){e&1&&(i(0,"span"),n(1,"Email is required"),t())}function ve(e,s){e&1&&(i(0,"span"),n(1,"Please enter a valid email"),t())}function xe(e,s){if(e&1&&(i(0,"mat-error"),p(1,he,2,0,"span",6)(2,ve,2,0,"span",6),t()),e&2){let o,r,d=h();a(),l("ngIf",(o=d.registerForm.get("email"))==null||o.errors==null?null:o.errors.required),a(),l("ngIf",(r=d.registerForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function Ce(e,s){e&1&&(i(0,"span"),n(1,"Password is required"),t())}function be(e,s){e&1&&(i(0,"span"),n(1,"Password must be at least 8 characters"),t())}function Me(e,s){e&1&&(i(0,"span"),n(1,"Password must contain at least 8 characters with letters and numbers"),t())}function Pe(e,s){if(e&1&&(i(0,"mat-error"),p(1,Ce,2,0,"span",6)(2,be,2,0,"span",6)(3,Me,2,0,"span",6),t()),e&2){let o,r,d,u=h();a(),l("ngIf",(o=u.registerForm.get("password"))==null||o.errors==null?null:o.errors.required),a(),l("ngIf",(r=u.registerForm.get("password"))==null||r.errors==null?null:r.errors.minlength),a(),l("ngIf",(d=u.registerForm.get("password"))==null||d.errors==null?null:d.errors.pattern)}}function we(e,s){e&1&&(i(0,"mat-error"),n(1," Confirm password is required "),t())}function ye(e,s){e&1&&(i(0,"mat-error"),n(1," Passwords do not match "),t())}function Se(e,s){e&1&&(i(0,"mat-error",28),n(1," You must accept the terms and conditions "),t())}function Ie(e,s){if(e&1&&(i(0,"div",29)(1,"mat-icon"),n(2,"error"),t(),n(3),t()),e&2){let o=h();a(3),M(" ",o.authService.error()," ")}}function Fe(e,s){e&1&&c(0,"mat-spinner",30)}function Ee(e,s){e&1&&(i(0,"span"),n(1,"Create Account"),t())}function ke(e){let s=e.get("password"),o=e.get("confirmPassword");return!s||!o?null:s.value!==o.value?{passwordMismatch:!0}:null}var de=class e{authService=f(E);fb=f(A);router=f(y);snackBar=f(se);logger=f(F);hidePassword=v(!0);hideConfirmPassword=v(!0);registerForm;constructor(){let s=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/,o=/^[a-zA-Z0-9_]+$/;this.registerForm=this.fb.group({firstName:["",[m.required,m.minLength(2)]],lastName:["",[m.required,m.minLength(2)]],username:["",[m.required,m.minLength(3),m.maxLength(20),m.pattern(o)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(8),m.pattern(s)]],confirmPassword:["",[m.required]],acceptTerms:[!1,[m.requiredTrue]]},{validators:ke})}ngOnInit(){setTimeout(()=>{document.querySelector('input[formControlName="firstName"]')?.focus()},100)}onSubmit(){if(this.registerForm.invalid){this.markFormGroupTouched();return}let s={email:this.registerForm.value.email,username:this.registerForm.value.username,password:this.registerForm.value.password,confirmPassword:this.registerForm.value.confirmPassword,firstName:this.registerForm.value.firstName,lastName:this.registerForm.value.lastName,acceptTerms:this.registerForm.value.acceptTerms};this.authService.register(s).subscribe({next:o=>{o.success&&(this.snackBar.open("Account created successfully! Welcome to FindBook!","Close",{duration:5e3,panelClass:["success-snackbar"]}),this.router.navigate(["/dashboard"]))},error:o=>{this.logger.auth("Registration failed",o),this.snackBar.open(o.message||"Registration failed","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}togglePasswordVisibility(){this.hidePassword.set(!this.hidePassword())}toggleConfirmPasswordVisibility(){this.hideConfirmPassword.set(!this.hideConfirmPassword())}signUpWithGoogle(){this.snackBar.open("Google Sign-Up coming soon!","Close",{duration:me.SNACKBAR_DURATION})}isFieldInvalid(s){let o=this.registerForm.get(s);return!!(o&&o.invalid&&(o.dirty||o.touched))}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(s=>{this.registerForm.get(s)?.markAsTouched()})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=b({type:e,selectors:[["app-register"]],decls:78,vars:32,consts:[[1,"register-container"],[1,"register-card"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"name-row"],["appearance","outline",1,"half-width"],["matInput","","type","text","formControlName","firstName","placeholder","John"],[4,"ngIf"],["matInput","","type","text","formControlName","lastName","placeholder","Doe"],["appearance","outline",1,"full-width"],["matInput","","type","text","formControlName","username","placeholder","johndoe"],["matSuffix",""],["matInput","","type","email","formControlName","email","placeholder","john@example.com"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["type","button","matSuffix","","mat-icon-button","",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your password",3,"type"],["formControlName","acceptTerms","required","",1,"terms-checkbox"],["href","/terms","target","_blank"],["href","/privacy","target","_blank"],["class","checkbox-error",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"submit-button","full-width",3,"disabled"],["diameter","20",4,"ngIf"],[1,"social-login"],[1,"divider"],["type","button","mat-stroked-button","",1,"social-button","google-button","full-width",3,"click","disabled"],[1,"auth-links"],[1,"login-link"],["routerLink","/auth/login"],[1,"checkbox-error"],[1,"error-message"],["diameter","20"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),n(5,"book"),t(),n(6," Join FindBook "),t(),i(7,"mat-card-subtitle"),n(8," Create your account to start discovering great books "),t()(),i(9,"mat-card-content")(10,"form",2),_("ngSubmit",function(){return r.onSubmit()}),i(11,"div",3)(12,"mat-form-field",4)(13,"mat-label"),n(14,"First Name"),t(),c(15,"input",5),p(16,pe,2,0,"mat-error",6),t(),i(17,"mat-form-field",4)(18,"mat-label"),n(19,"Last Name"),t(),c(20,"input",7),p(21,ce,2,0,"mat-error",6),t()(),i(22,"mat-form-field",8)(23,"mat-label"),n(24,"Username"),t(),c(25,"input",9),i(26,"mat-icon",10),n(27,"account_circle"),t(),p(28,_e,4,3,"mat-error",6),t(),i(29,"mat-form-field",8)(30,"mat-label"),n(31,"Email"),t(),c(32,"input",11),i(33,"mat-icon",10),n(34,"email"),t(),p(35,xe,3,2,"mat-error",6),t(),i(36,"mat-form-field",8)(37,"mat-label"),n(38,"Password"),t(),c(39,"input",12),i(40,"button",13),_("click",function(){return r.togglePasswordVisibility()}),i(41,"mat-icon"),n(42),t()(),p(43,Pe,4,3,"mat-error",6),t(),i(44,"mat-form-field",8)(45,"mat-label"),n(46,"Confirm Password"),t(),c(47,"input",14),i(48,"button",13),_("click",function(){return r.toggleConfirmPasswordVisibility()}),i(49,"mat-icon"),n(50),t()(),p(51,we,2,0,"mat-error",6)(52,ye,2,0,"mat-error",6),t(),i(53,"mat-checkbox",15),n(54," I agree to the "),i(55,"a",16),n(56,"Terms of Service"),t(),n(57," and "),i(58,"a",17),n(59,"Privacy Policy"),t()(),p(60,Se,2,0,"mat-error",18)(61,Ie,4,1,"div",19),i(62,"button",20),p(63,Fe,1,0,"mat-spinner",21)(64,Ee,2,0,"span",6),t(),i(65,"div",22)(66,"div",23)(67,"span"),n(68,"Or sign up with"),t()(),i(69,"button",24),_("click",function(){return r.signUpWithGoogle()}),i(70,"mat-icon"),n(71,"account_circle"),t(),n(72," Sign up with Google "),t()(),i(73,"div",25)(74,"div",26),n(75," Already have an account? "),i(76,"a",27),n(77,"Sign in"),t()()()()()()()),o&2&&(a(10),l("formGroup",r.registerForm),a(5),g("error",r.isFieldInvalid("firstName")),a(),l("ngIf",r.isFieldInvalid("firstName")),a(4),g("error",r.isFieldInvalid("lastName")),a(),l("ngIf",r.isFieldInvalid("lastName")),a(4),g("error",r.isFieldInvalid("username")),a(3),l("ngIf",r.isFieldInvalid("username")),a(4),g("error",r.isFieldInvalid("email")),a(3),l("ngIf",r.isFieldInvalid("email")),a(4),g("error",r.isFieldInvalid("password")),l("type",r.hidePassword()?"password":"text"),a(),x("aria-label","Hide password"),a(2),C(r.hidePassword()?"visibility_off":"visibility"),a(),l("ngIf",r.isFieldInvalid("password")),a(4),g("error",r.isFieldInvalid("confirmPassword")||(r.registerForm.errors==null?null:r.registerForm.errors.passwordMismatch)),l("type",r.hideConfirmPassword()?"password":"text"),a(),x("aria-label","Hide password"),a(2),C(r.hideConfirmPassword()?"visibility_off":"visibility"),a(),l("ngIf",r.isFieldInvalid("confirmPassword")),a(),l("ngIf",(r.registerForm.errors==null?null:r.registerForm.errors.passwordMismatch)&&!r.isFieldInvalid("confirmPassword")),a(8),l("ngIf",r.isFieldInvalid("acceptTerms")),a(),l("ngIf",r.authService.error()),a(),l("disabled",r.registerForm.invalid||r.authService.isLoading()),a(),l("ngIf",r.authService.isLoading()),a(),l("ngIf",!r.authService.isLoading()),a(5),l("disabled",r.authService.isLoading()))},dependencies:[w,P,B,T,k,O,R,L,N,q,I,S,j,G,z,U,V,D,ee,X,K,Y,Q,re,te,J,W,H,$,Z,ae,oe,ne,ie,le],styles:['.register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.register-card[_ngcontent-%COMP%]{max-width:500px;width:100%;box-shadow:0 8px 32px #0000001a;border-radius:16px}.register-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.register-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-size:24px;font-weight:600}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.name-row[_ngcontent-%COMP%]{display:flex;gap:12px}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}.terms-checkbox[_ngcontent-%COMP%]{margin:16px 0 8px}.terms-checkbox[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none}.terms-checkbox[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.checkbox-error[_ngcontent-%COMP%]{color:#f44336;font-size:12px;margin-top:-8px;margin-bottom:16px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f44336;background:#f443361a;padding:12px;border-radius:8px;font-size:14px}.submit-button[_ngcontent-%COMP%]{height:48px;font-size:16px;font-weight:500;margin:16px 0 8px}.social-login[_ngcontent-%COMP%]{margin:20px 0}.divider[_ngcontent-%COMP%]{position:relative;text-align:center;margin:20px 0}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 16px;color:#666;font-size:14px}.social-button[_ngcontent-%COMP%]{height:48px;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px}.google-button[_ngcontent-%COMP%]{border-color:#4285f4;color:#4285f4}.google-button[_ngcontent-%COMP%]:hover{background-color:#4285f40a}.auth-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.login-link[_ngcontent-%COMP%]{font-size:14px;color:#666}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error[_ngcontent-%COMP%]{border-color:#f44336!important}@media (max-width: 600px){.register-container[_ngcontent-%COMP%]{padding:16px}.register-card[_ngcontent-%COMP%]{margin:0}.name-row[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.half-width[_ngcontent-%COMP%]{width:100%}}']})};export{de as RegisterComponent,ke as passwordMatchValidator};
