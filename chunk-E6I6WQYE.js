import{c as q}from"./chunk-BNHENX4C.js";import"./chunk-WFY6EWXF.js";import"./chunk-PIEP4UTV.js";import{c as T,d as I}from"./chunk-T3TVI72N.js";import{a as E,c as M}from"./chunk-NQKSDALU.js";import"./chunk-FGMLFNZ2.js";import"./chunk-J4FXYLKG.js";import"./chunk-TH6PUXZV.js";import"./chunk-56UCSB4U.js";import"./chunk-XCLEEEGU.js";import"./chunk-2JQEKP5E.js";import"./chunk-26UILUH3.js";import{$ as l,Ca as p,Db as a,E as u,Na as h,R as f,Ra as v,cb as m,db as t,ea as k,eb as i,fa as _,mb as b,ob as d,p as g,pb as B,pc as P,pd as w,rd as D,sd as y,td as C,uc as x,ud as S}from"./chunk-MML5RVMT.js";function R(c,e){if(c&1){let r=b();t(0,"div",6)(1,"mat-icon",7),a(2,"error_outline"),i(),t(3,"h2"),a(4,"Book Not Found"),i(),t(5,"p"),a(6,"The requested book could not be found or loaded."),i(),t(7,"button",8),d("click",function(){k(r);let n=B();return _(n.goBack())}),t(8,"mat-icon"),a(9,"arrow_back"),i(),a(10," Back to Search "),i()()}}var O=class c{route=l(E);router=l(M);bookService=l(I);favoritesService=l(T);book=null;isLoading=!1;hasError=!1;ngOnInit(){this.loadBookDetails()}loadBookDetails(){this.isLoading=!0,this.hasError=!1,this.route.params.pipe(f(e=>{let r=e.id;if(!r)throw new Error("No book ID provided");return this.bookService.getBookById(r)}),u(e=>(console.error("Failed to load book details:",e),this.hasError=!0,g(null)))).subscribe({next:e=>{this.book=e,this.isLoading=!1},error:e=>{console.error("Error loading book:",e),this.hasError=!0,this.isLoading=!1}})}goBack(){this.router.navigate(["/"])}onFavoriteToggled(e){this.favoritesService.toggleFavorite(e)}onPreviewRequested(e){console.log("Preview requested for:",e.title)}onPurchaseRequested(e){console.log("Purchase requested for:",e.title)}static \u0275fac=function(r){return new(r||c)};static \u0275cmp=h({type:c,selectors:[["app-book-details-page"]],decls:9,vars:4,consts:[[1,"book-details-page"],[1,"navigation-header"],["mat-icon-button","","aria-label","Back to search","data-cy","back-button",3,"click"],[1,"page-title"],["data-cy","book-details",3,"closed","favoriteToggled","previewRequested","purchaseRequested","book","isLoading","hasError"],["class","error-container","data-cy","error-message",4,"ngIf"],["data-cy","error-message",1,"error-container"],[1,"error-icon"],["mat-raised-button","","color","primary","data-cy","back-to-search",3,"click"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"div",1)(2,"button",2),d("click",function(){return o.goBack()}),t(3,"mat-icon"),a(4,"arrow_back"),i()(),t(5,"span",3),a(6,"Book Details"),i()(),t(7,"app-book-details",4),d("closed",function(){return o.goBack()})("favoriteToggled",function(s){return o.onFavoriteToggled(s)})("previewRequested",function(s){return o.onPreviewRequested(s)})("purchaseRequested",function(s){return o.onPurchaseRequested(s)}),i(),v(8,R,11,0,"div",5),i()),r&2&&(p(7),m("book",o.book)("isLoading",o.isLoading)("hasError",o.hasError),p(),m("ngIf",o.hasError&&!o.isLoading))},dependencies:[x,P,y,D,w,S,C,q],styles:[".book-details-page[_ngcontent-%COMP%]{min-height:100vh;background:#fafafa}.navigation-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#fff;box-shadow:0 2px 4px #0000001a;gap:16px}.page-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#333}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center;min-height:400px}.error-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#f44336;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666;max-width:400px}"]})};export{O as BookDetailsPage};
