import{a as oe,b as re,c as ae,d as le}from"./chunk-4J6L7V7E.js";import{a as O,c as x}from"./chunk-6UOWWZFU.js";import{a as $,b as ee,c as te}from"./chunk-52S45RM7.js";import{a as ne,b as ie}from"./chunk-ELQPEQTN.js";import"./chunk-PXR6HIL4.js";import{c as P,d as I,f as k}from"./chunk-SJIHYLDK.js";import"./chunk-7FAHNJ6M.js";import{b as w}from"./chunk-VG2AWH4E.js";import{a as W,b as X,d as Y,g as Z}from"./chunk-MAIH4GX7.js";import{b as F,d as c,f as E,g as L,j as T,k as N,l as B,n as G,p as R}from"./chunk-F2QJWC7L.js";import{a as D,b as q,c as A,d as z,f as j,g as V}from"./chunk-SXMU3CUJ.js";import"./chunk-J3YIZJEV.js";import{Da as a,Eb as _,Gb as r,Hb as C,Ib as M,Oa as b,Sa as d,aa as p,bb as v,eb as m,fb as i,gb as t,hb as g,pa as h,qb as u,sb as f,sc as S,ud as H,wd as U,xc as y,xd as K,yd as J,zd as Q}from"./chunk-VY3O5C5Q.js";function se(o,l){o&1&&(i(0,"span"),r(1,"Email is required"),t())}function de(o,l){o&1&&(i(0,"span"),r(1,"Please enter a valid email"),t())}function pe(o,l){if(o&1&&(i(0,"mat-error"),d(1,se,2,0,"span",6)(2,de,2,0,"span",6),t()),o&2){let n,e,s=f();a(),m("ngIf",(n=s.loginForm.get("email"))==null||n.errors==null?null:n.errors.required),a(),m("ngIf",(e=s.loginForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function ce(o,l){o&1&&(i(0,"span"),r(1,"Password is required"),t())}function ge(o,l){o&1&&(i(0,"span"),r(1,"Password must be at least 6 characters"),t())}function ue(o,l){if(o&1&&(i(0,"mat-error"),d(1,ce,2,0,"span",6)(2,ge,2,0,"span",6),t()),o&2){let n,e,s=f();a(),m("ngIf",(n=s.loginForm.get("password"))==null||n.errors==null?null:n.errors.required),a(),m("ngIf",(e=s.loginForm.get("password"))==null||e.errors==null?null:e.errors.minlength)}}function fe(o,l){if(o&1&&(i(0,"div",20)(1,"mat-icon"),r(2,"error"),t(),r(3),t()),o&2){let n=f();a(3),M(" ",n.authService.error()," ")}}function _e(o,l){o&1&&g(0,"mat-spinner",21)}function xe(o,l){o&1&&(i(0,"span"),r(1,"Sign In"),t())}var me=class o{authService=p(O);fb=p(G);router=p(P);snackBar=p(ae);logger=p(w);hidePassword=h(!0);loginForm;constructor(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]],rememberMe:[!1]})}ngOnInit(){setTimeout(()=>{document.querySelector('input[formControlName="email"]')?.focus()},100)}onSubmit(){if(this.loginForm.invalid){this.markFormGroupTouched();return}let l=this.loginForm.value;this.authService.login(l).subscribe({next:n=>{if(n.success){this.snackBar.open("Login successful!","Close",{duration:x.SNACKBAR_DURATION});let e=sessionStorage.getItem("findbook_redirect_url")||"/dashboard";sessionStorage.removeItem("findbook_redirect_url"),this.router.navigate([e])}},error:n=>{this.logger.auth("Login failed",n),this.snackBar.open(n.message||"Login failed","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}togglePasswordVisibility(){this.hidePassword.set(!this.hidePassword())}onGoogleSignIn(){this.snackBar.open("Google Sign-In coming soon!","Close",{duration:x.SNACKBAR_DURATION})}isFieldInvalid(l){let n=this.loginForm.get(l);return!!(n&&n.invalid&&(n.dirty||n.touched))}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(l=>{this.loginForm.get(l)?.markAsTouched()})}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=b({type:o,selectors:[["app-login"]],decls:47,vars:15,consts:[[1,"login-container"],[1,"login-card"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["type","button","matSuffix","","mat-icon-button","",3,"click"],["formControlName","rememberMe",1,"remember-me"],["class","error-message",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"submit-button","full-width",3,"disabled"],["diameter","20",4,"ngIf"],[1,"social-login"],[1,"divider"],["type","button","mat-stroked-button","",1,"social-button","google-button","full-width",3,"click","disabled"],[1,"auth-links"],["routerLink","/auth/forgot-password",1,"forgot-password-link"],[1,"register-link"],["routerLink","/auth/register"],[1,"error-message"],["diameter","20"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),r(5,"book"),t(),r(6," Sign in to FindBook "),t(),i(7,"mat-card-subtitle"),r(8," Discover your next great read "),t()(),i(9,"mat-card-content")(10,"form",2),u("ngSubmit",function(){return e.onSubmit()}),i(11,"mat-form-field",3)(12,"mat-label"),r(13,"Email"),t(),g(14,"input",4),i(15,"mat-icon",5),r(16,"email"),t(),d(17,pe,3,2,"mat-error",6),t(),i(18,"mat-form-field",3)(19,"mat-label"),r(20,"Password"),t(),g(21,"input",7),i(22,"button",8),u("click",function(){return e.togglePasswordVisibility()}),i(23,"mat-icon"),r(24),t()(),d(25,ue,3,2,"mat-error",6),t(),i(26,"mat-checkbox",9),r(27," Remember me "),t(),d(28,fe,4,1,"div",10),i(29,"button",11),d(30,_e,1,0,"mat-spinner",12)(31,xe,2,0,"span",6),t(),i(32,"div",13)(33,"div",14)(34,"span"),r(35,"Or continue with"),t()(),i(36,"button",15),u("click",function(){return e.onGoogleSignIn()}),i(37,"mat-icon"),r(38,"account_circle"),t(),r(39," Sign in with Google "),t()(),i(40,"div",16)(41,"a",17),r(42," Forgot your password? "),t(),i(43,"div",18),r(44," Don't have an account? "),i(45,"a",19),r(46,"Sign up"),t()()()()()()()),n&2&&(a(10),m("formGroup",e.loginForm),a(4),_("error",e.isFieldInvalid("email")),a(3),m("ngIf",e.isFieldInvalid("email")),a(4),_("error",e.isFieldInvalid("password")),m("type",e.hidePassword()?"password":"text"),a(),v("aria-label","Hide password"),a(2),C(e.hidePassword()?"visibility_off":"visibility"),a(),m("ngIf",e.isFieldInvalid("password")),a(3),m("ngIf",e.authService.error()),a(),m("disabled",e.loginForm.invalid||e.authService.isLoading()),a(),m("ngIf",e.authService.isLoading()),a(),m("ngIf",!e.authService.isLoading()),a(5),m("disabled",e.authService.isLoading()))},dependencies:[y,S,R,T,F,E,L,N,B,k,I,V,D,A,j,z,q,$,Z,W,X,Y,te,ee,K,U,H,Q,J,re,oe,ie,ne,le],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2)}.login-card[_ngcontent-%COMP%]{max-width:400px;width:100%;box-shadow:0 8px 32px #0000001a;border-radius:16px}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.login-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-size:24px;font-weight:600}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.remember-me[_ngcontent-%COMP%]{margin:8px 0}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f44336;background:#f443361a;padding:12px;border-radius:8px;font-size:14px}.submit-button[_ngcontent-%COMP%]{height:48px;font-size:16px;font-weight:500;margin:16px 0 8px}.social-login[_ngcontent-%COMP%]{margin:20px 0}.divider[_ngcontent-%COMP%]{position:relative;text-align:center;margin:20px 0}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e0e0e0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 16px;color:#666;font-size:14px}.social-button[_ngcontent-%COMP%]{height:48px;font-size:16px;display:flex;align-items:center;justify-content:center;gap:8px}.google-button[_ngcontent-%COMP%]{border-color:#4285f4;color:#4285f4}.google-button[_ngcontent-%COMP%]:hover{background-color:#4285f40a}.auth-links[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.forgot-password-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-size:14px}.forgot-password-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.register-link[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;color:#666}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error[_ngcontent-%COMP%]{border-color:#f44336!important}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{margin:0}}']})};export{me as LoginComponent};
